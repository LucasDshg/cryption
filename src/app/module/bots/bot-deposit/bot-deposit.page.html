<app-header title="Robô"> </app-header>

<ion-content>
  <div class="ion-d-flex ion-overflow-auto ion-align-items-center">
    <ion-chip
      [outline]="true"
      class="ion-d-block ion-flex-1"
      [ngClass]="{ 'chip-selected': 'EXTRATO' === tabSelected() }"
      (click)="toggleTab('EXTRATO')"
    >
      Extrato
    </ion-chip>

    <ion-chip
      [outline]="true"
      class="ion-d-block ion-flex-1"
      [ngClass]="{ 'chip-selected': 'DEPOSIT' === tabSelected() }"
      (click)="toggleTab('DEPOSIT')"
    >
      Depositar
    </ion-chip>
  </div>
  @switch (tabSelected()) {
    @case ('DEPOSIT') {
      <ng-container *ngTemplateOutlet="depositTemplate"></ng-container>
    }
  }
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-button shape="round" expand="full" color="primary" (click)="back()">
      Voltar
    </ion-button>
  </ion-toolbar>
</ion-footer>

<ng-template #depositTemplate>
  <ion-card class="ion-no-shadow">
    <ion-card-header>
      <ion-card-title color="primary">PIX </ion-card-title>
      <ion-card-subtitle color="medium">
        <small>
          Gere o link pix para realizar o deposito no banco de sua preferência.
        </small>
      </ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      @if (linkCreated()) {
        <div class="" (click)="copy()">
          <small>link</small>
        </div>
        <ion-button
          shape="round"
          expand="full"
          color="primary"
          fill="clear"
          (click)="newLink()"
        >
          Gerar novo link
        </ion-button>
      } @else {
        <ion-input
          [formControl]="controlValue"
          label="Valor"
          label-placement="floating"
          fill="outline"
          type="tel"
          class="ion-m-top-16"
          [maskito]="masks.number"
          [maskitoElement]="masks.predicate"
        >
          <ion-text slot="start">$: </ion-text>
        </ion-input>
        <ion-button
          shape="round"
          expand="full"
          color="primary"
          fill="clear"
          (click)="createLink()"
        >
          Gerar link
        </ion-button>
      }
    </ion-card-content>
  </ion-card>
</ng-template>
